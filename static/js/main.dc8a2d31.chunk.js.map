{"version":3,"sources":["app/httpClient.js","features/github-users/usersSlice.js","features/github-repositories/repositoriesSlice.js","app/store.js","components/search-bar/SearchBar.js","features/github-profiles/RepositoryPreview.js","features/github-profiles/CollapsibleProfileItem.js","features/github-profiles/GithubProfilesContainer.js","app/App.js","features/github-profiles/GithubProfilesPage.js","serviceWorker.js","index.js"],"names":["httpClient","axios","create","baseURL","timeout","headers","Accept","fetchUsers","createAsyncThunk","username","a","get","params","q","type","per_page","response","data","items","usersSlice","createSlice","name","initialState","entities","loading","reducers","extraReducers","pending","state","fulfilled","action","payload","rejected","repositoriesAdapter","createEntityAdapter","selectId","repo","id","getInitialState","fetchRepositories","userLogin","repositoriesSlice","status","upsertMany","getSelectors","repositories","selectAllRepositories","selectAll","selectRepositoriesByUser","selectById","selectIds","createSelector","userId","repos","filter","owner","store","configureStore","reducer","users","usersReducer","repositoriesReducer","SearchBar","onClick","disabled","inputRef","React","createRef","className","classnames","onSubmit","e","preventDefault","current","value","placeholder","ref","RepositoryPreview","repositoryId","description","starsCount","console","log","StartIcn","StarIcon","StarBorderIcon","defaultProps","CollapsibleProfileItem","user","dispatch","useDispatch","useSelector","useState","isOpen","setIsOpen","login","Array","isArray","map","stargazers_count","GithubProfilesContainer","isLoading","routerBaseName","GithubProfilesPage","App","basename","path","component","exact","to","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.dc8a2d31.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://api.github.com';\nconst DEFAULT_HEADERS = {\n  Accept: 'application/vnd.github.v3+json',\n};\n\nexport const httpClient = axios.create({\n  baseURL: BASE_URL,\n  timeout: 30000,\n  headers: DEFAULT_HEADERS,\n});\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { httpClient } from '../../app/httpClient';\n\nexport const fetchUsers = createAsyncThunk(\n  'users/fetchUsers',\n  async (username) => {\n    const response = await httpClient.get('search/users', {\n      params: {\n        q: `${username} in:login`,\n        type: 'Users',\n        per_page: 5,\n      },\n    });\n\n    return response.data.items;\n  }\n);\n\nconst usersSlice = createSlice({\n  name: 'users',\n  initialState: { entities: [], loading: false },\n  reducers: {},\n  extraReducers: {\n    [fetchUsers.pending]: (state) => {\n      state.loading = true;\n    },\n    [fetchUsers.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.entities = action.payload;\n    },\n    [fetchUsers.rejected]: (state, action) => {\n      state.loading = false;\n    },\n  },\n});\n\nexport default usersSlice.reducer;\n","import {\n  createSlice,\n  createAsyncThunk,\n  createEntityAdapter,\n  createSelector,\n} from '@reduxjs/toolkit';\nimport { httpClient } from '../../app/httpClient';\n\nconst repositoriesAdapter = createEntityAdapter({\n  selectId: (repo) => repo.id,\n});\n\nconst initialState = repositoriesAdapter.getInitialState();\n\nexport const fetchRepositories = createAsyncThunk(\n  'repositories/fetchRepositories',\n  async (userLogin) => {\n    const response = await httpClient.get(`/users/${userLogin}/repos`);\n\n    return response.data;\n  }\n);\n\nconst repositoriesSlice = createSlice({\n  name: 'repositories',\n  initialState: initialState,\n  reducers: {},\n  extraReducers: {\n    [fetchRepositories.fulfilled]: (state, action) => {\n      state.status = 'succeeded';\n      repositoriesAdapter.upsertMany(state, action.payload);\n    },\n  },\n});\n\nexport default repositoriesSlice.reducer;\n\nexport const {\n  selectAll: selectAllRepositories,\n  selectById: selectRepositoryById,\n  selectIds: selectRepositoriesIds,\n} = repositoriesAdapter.getSelectors((state) => state.repositories);\n\nexport const selectRepositoriesByUser = createSelector(\n  [selectAllRepositories, (state, userId) => userId],\n  (repos, userId) => repos.filter((repo) => repo.owner.id === userId)\n);\n","import { configureStore } from '@reduxjs/toolkit';\nimport usersReducer from '../features/github-users/usersSlice';\nimport repositoriesReducer from '../features/github-repositories/repositoriesSlice';\n\nexport const store = configureStore({\n  reducer: {\n    users: usersReducer,\n    repositories: repositoriesReducer,\n  },\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport './styles.css';\n\nexport function SearchBar({ onClick, disabled }) {\n  const inputRef = React.createRef();\n\n  const handleOnSubmit = (e) => {\n    e.preventDefault();\n\n    onClick(inputRef.current.value);\n  };\n\n  return (\n    <div\n      className={classnames('search-bar__container', {\n        disabled: disabled,\n      })}\n    >\n      <form className=\"search-bar__form\" onSubmit={handleOnSubmit}>\n        <input\n          disabled={disabled}\n          className=\"form__input\"\n          placeholder=\"Enter username\"\n          type=\"text\"\n          name=\"username-input\"\n          ref={inputRef}\n        />\n        <input\n          disabled={disabled}\n          className=\"form__button\"\n          type=\"submit\"\n          value=\"Search\"\n        />\n      </form>\n    </div>\n  );\n}\n\nSearchBar.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\nimport StarIcon from '@material-ui/icons/Star';\n\nimport './RepositoryPreview.css';\n\nexport const RepositoryPreview = ({\n  repositoryId,\n  name,\n  description,\n  starsCount,\n}) => {\n  console.log('starsCount', starsCount);\n  const StartIcn = starsCount > 0 ? StarIcon : StarBorderIcon;\n\n  return (\n    <div className=\"previewItem\">\n      <div className=\"info\">\n        <div className=\"title\">\n          <p>{name}</p>\n          <div className=\"stars\">\n            <span>{starsCount}</span> <StartIcn />\n          </div>\n        </div>\n        <p className=\"description\">{description}</p>\n      </div>\n    </div>\n  );\n};\n\nRepositoryPreview.propTypes = {\n  repositoryId: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  starsCount: PropTypes.number,\n};\n\nRepositoryPreview.defaultProps = {\n  starsCount: 0,\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  fetchRepositories,\n  selectRepositoriesByUser,\n} from '../github-repositories/repositoriesSlice';\nimport { RepositoryPreview } from './RepositoryPreview';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\n\nimport './CollapsibleProfileItem.css';\n\nexport const CollapsibleProfileItem = ({ user }) => {\n  const dispatch = useDispatch();\n  const repositories = useSelector((state) =>\n    selectRepositoriesByUser(state, user.id)\n  );\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleClick = () => {\n    if (!isOpen) {\n      dispatch(fetchRepositories(user.login));\n    }\n    setIsOpen(!isOpen);\n  };\n\n  return (\n    <div className=\"profile-container\">\n      <div className=\"clickable-profile-item\" onClick={handleClick}>\n        <span>{user.login}</span>\n        {isOpen ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n      </div>\n      {isOpen && (\n        <div className=\"repositoriesList\">\n          {Array.isArray(repositories) &&\n            repositories.map(({ id, name, description, stargazers_count }) => {\n              return (\n                <RepositoryPreview\n                  key={id}\n                  repositoryId={id}\n                  name={name}\n                  description={description}\n                  starsCount={stargazers_count}\n                />\n              );\n            })}\n        </div>\n      )}\n    </div>\n  );\n};\n\nCollapsibleProfileItem.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    login: PropTypes.string.isRequired,\n  }),\n};\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { fetchUsers } from '../github-users/usersSlice';\nimport { SearchBar } from '../../components/search-bar';\nimport { CollapsibleProfileItem } from './CollapsibleProfileItem';\n\nimport './GithubProfilesContainer.css';\n\nexport function GithubProfilesContainer() {\n  const dispatch = useDispatch();\n  const users = useSelector((state) => state.users.entities);\n  const isLoading = useSelector((state) => state.users.loading);\n\n  const handleSearch = (username) => {\n    dispatch(fetchUsers(username));\n  };\n\n  return (\n    <div className=\"githubProfilesContainer\">\n      <SearchBar onClick={handleSearch} disabled={isLoading} />\n      <div className=\"expandableList\">\n        {Array.isArray(users) &&\n          users.map((user) => {\n            return <CollapsibleProfileItem key={user.id} user={user} />;\n          })}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Redirect,\n  Route,\n} from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport './App.css';\nimport { store } from './store';\nimport { GithubProfilesPage } from '../features/github-profiles/GithubProfilesPage';\n\nlet routerBaseName;\n\nif (process.env.NODE_ENV !== 'development') {\n  routerBaseName = '/profile-search-sample';\n}\n\nfunction App() {\n  return (\n    <Router basename={routerBaseName}>\n      <Provider store={store}>\n        <div className=\"App\">\n          <Switch>\n            <Route path=\"/github-profiles\" component={GithubProfilesPage} />\n            <Route path=\"/\" exact>\n              <Redirect to=\"/github-profiles\" />\n            </Route>\n          </Switch>\n        </div>\n      </Provider>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport { GithubProfilesContainer } from './GithubProfilesContainer';\nimport './GithubProfilesPage.css';\n\nexport function GithubProfilesPage() {\n  return (\n    <div className=\"GithubProfilesPage\">\n      <GithubProfilesContainer />\n    </div>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}